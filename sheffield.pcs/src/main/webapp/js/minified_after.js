function loadGraph(b){NProgress.start();$("#pcs_graph").load("graph.jsp",{buildings:$.unique(b).toString()},function(){NProgress.done()})}function loadGraph_(){loadGraph(getCurrentBuildings())}function getCurrentBuildings(){return JSON.parse("["+localStorage.getItem("selectedBuildings")+"]")}function ICBuildings(){localStorage.setItem("selectedBuildings",[14,15,16,17,18,19,20,21])}function MappinBuildings(){localStorage.setItem("selectedBuildings",[29,30,31])}
function WesternBankBuildings(){localStorage.setItem("selectedBuildings",[25,26,27,28,39])}function clearBuildings(){localStorage.removeItem("selectedBuildings")}function addBuilding(b){var a=getCurrentBuildings();a.push(b);localStorage.setItem("selectedBuildings",a)}function testBuilding(b){var a=getCurrentBuildings();return 0<=$.inArray(b,a)}function removeBuilding(b){var a=getCurrentBuildings(),a=jQuery.grep(a,function(a){return a!=b});localStorage.setItem("selectedBuildings",a)}
function updateBuildingSelectionStyles(){$(".buildingInfo").each(function(b,a){var c=$(a),d=c.data("buildingid");testBuilding(d)?c.addClass("selected"):c.removeClass("selected")})}function updateICCounter(){$("#currentPcs").load("api/scraper/ic/current")}
$(function(){var b=getCurrentBuildings();if(null==b||null==b[0])ICBuildings(),b=getCurrentBuildings();$(".buildingInfo").click(function(a){a=$(a.target);var b=a.data("buildingid");void 0==b&&(a=a.parent(),b=a.data("buildingid"));testBuilding(b)?(removeBuilding(b),a.removeClass("selected")):(addBuilding(b),a.addClass("selected"));loadGraph_()});updateBuildingSelectionStyles();$("#btn-refresh").click(function(){loadGraph_()});$("#btn-IC_pcs").click(function(){ICBuildings();updateBuildingSelectionStyles();
loadGraph_()});$("#btn-Mappin_pcs").click(function(){MappinBuildings();updateBuildingSelectionStyles();loadGraph_()});$("#btn-WesternBank_pcs").click(function(){WesternBankBuildings();updateBuildingSelectionStyles();loadGraph_()});loadGraph_()});